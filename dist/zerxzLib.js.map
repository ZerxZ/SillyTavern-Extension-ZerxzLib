{"version":3,"file":"zerxzLib.js","mappings":"oMACA,IAAIA,EAAsB,CCA1BA,EAAwB,CAACC,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXF,EAAoBI,EAAEF,EAAYC,KAASH,EAAoBI,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDH,EAAwB,CAACS,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,ICIlF,MAAM,EAJE,CAACI,IACR,IAAIC,EAAI,CAAC,EAAgC,OAA7Bf,EAAoBgB,EAAED,EAAGD,GAAWC,GAGZA,CAAE,CAAE,YAAiB,IAAOE,EAA2D,YAAG,YAAiB,IAAOA,EAA2D,YAAG,kBAAuB,IAAOA,EAAiE,kBAAG,sBAA2B,IAAOA,EAAqE,wBCA9Z,MAAM,EAJE,CAACH,IACR,IAAIC,EAAI,CAAC,EAAgC,OAA7Bf,EAAoBgB,EAAED,EAAGD,GAAWC,GAGZ,CAAE,CAAE,aAAkB,IAAOG,EAAoE,eCAtI,MAAM,EAJE,CAACJ,IACR,IAAIC,EAAI,CAAC,EAAgC,OAA7Bf,EAAoBgB,EAAED,EAAGD,GAAWC,GAGZ,CAAE,CAAE,WAAgB,IAAOI,EAAiE,WAAG,iBAAsB,IAAOA,EAAuE,mBCJ3NC,EAAa,4BAIbC,EAAQ,CACjBC,YAJmE,SAAnDC,aAAaC,QAAQ,0BAKrCC,sBAJyE,SAA/CF,aAAaC,QAAQ,uBCEnD,MAAM,EAJE,CAACV,IACR,IAAIC,EAAI,CAAC,EAAgC,OAA7Bf,EAAoBgB,EAAED,EAAGD,GAAWC,GAGZ,CAAE,CAAE,oBAAyB,IAAOW,EAA4E,oBAAG,YAAiB,IAAOA,EAAoE,cCS7OC,eAAeC,IAClB,MAAMC,QAAiBC,MAAM,oBAAqB,CAC9CC,OAAQ,OACRC,SAASC,EAAAA,EAAAA,uBAGb,GAAwB,MAApBJ,EAASK,OAKT,YAJAC,EAAAA,EAAAA,kBACI,+GACAC,EAAAA,WAAWC,MAKnB,IAAKR,EAASS,GACV,OAMJ,aAFoBT,EAASU,MAGjC,CAEOZ,eAAea,IAAyB,IAAAC,EAC3C,MAAMC,QAAgBd,IACtB,IAAKc,EACD,OAEJ,IAAKrB,EAAMC,YACP,OAEJ,MACMqB,GAD6B,QAAtBF,EAAGC,EAAQtB,UAAW,IAAAqB,EAAAA,EAAI,IAElCG,MAAM,SACNC,KAAKC,GAAMA,EAAEC,SACbC,QAAQF,GAAMA,EAAEG,WAAW,YAChC,GAAIN,EAASO,QAAU,EACnB,OAEJ,MAAMC,EAAaT,EAAQU,mBAC3B,IAAIC,EAAc,GACdV,EAASW,SAASH,KAClBR,EAASY,OAAOZ,EAASa,QAAQL,GAAa,GAC9CR,EAASc,KAAKN,IAElBE,EAAcV,EAAS,IACvBe,EAAAA,EAAAA,aAAY,qBAAsBL,GAClCM,EAAQvC,EAAYuB,EAASiB,KAAK,OAClC,MAAMC,EAAWC,EAAE,8BAA8B,GAE3CC,EAAoBD,EAAE,4BAA4B,GAClDE,EAAiBF,EAAE,yBAAyB,GAClDG,QAAQC,IAAI,WAAYL,GACxBI,QAAQC,IAAI,WAAYvB,GACnBkB,IAGLE,EAAkBI,YAAc,SAAHC,OAAYf,GACzCW,EAAeG,YAAc,WAAHC,OAAcjB,GAExCU,EAASQ,MAAQ1B,EAASiB,KAAK,MACnC,CAGOjC,eAAegC,EAAQxD,EAAakE,GAA6C,IAA9BC,IAAqBC,UAAArB,OAAA,QAAAsB,IAAAD,UAAA,KAAAA,UAAA,SAErEb,EAAAA,EAAAA,aAAYvD,EAAKkE,GAEnBC,IACAG,EAAAA,EAAAA,wBAEJA,EAAAA,EAAAA,wBAEAC,EAAAA,EAAAA,wBACJ,CChCO,MAAMC,EAAiB,CAAC,aAAc,YAEhCC,EAAiBA,IAC7BD,EAAerB,SAASuB,EAAAA,aAAaC,wBAE/B,SAASC,IAA4B,IAAXC,EAAIT,UAAArB,OAAA,QAAAsB,IAAAD,UAAA,GAAAA,UAAA,GAAG,IAEvCpC,EAAAA,EAAAA,kBAAiB,aAADiC,OACXY,EAAI,sjFAyEJ5C,EAAAA,WAAWC,KAAM,GAAI,CACzB4C,OAAO,EACPC,MAAM,EACNC,wBAAwB,GAE1B,CAEOxD,eAAeyD,IAAuD,IAAAC,EAAAC,EAAA,IAAtC5C,EAA+B6B,UAAArB,OAAA,QAAAsB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACzE,IAAK7B,EACJ,OAED,MAAM6C,EAAWC,KAAKC,MAA+B,QAA1BJ,EAAC3C,EAAQgD,yBAAiB,IAAAL,EAAAA,EAAI,MACnDM,EAAoC,QAA7BL,EAAG5C,EAAQU,0BAAkB,IAAAkC,EAAAA,EAAI,GAC9CrB,QAAQC,IAAI,iBACZ,MAAM0B,EAAW9B,EAAE,mCACnBG,QAAQC,IAAI,WAAY0B,GACxB,MAAMC,EAAkBD,EAAS,GAC3BE,EAAcF,EAAS,GAC7B3B,QAAQC,IAAI,cAAe4B,GAC3B,MAAMC,EAAmBC,MAAMC,KAC9BH,EAAYI,UAEPC,EAAuBH,MAAMC,KAClCJ,EAAgBK,UAEjBjC,QAAQC,IAAI,mBAAoB6B,GAChC,MAAMK,EAAoBL,EAAiBlD,KAAKwD,GAAOA,EAAGhC,QAEpDiC,EAAmB,IADKH,EAAqBtD,KAAKwD,GAAOA,EAAGhC,WAG9D+B,GACFG,OACIC,EAAiBjB,EAAS1C,KAAK4D,GAAUA,EAAMA,QAErD,GAAIlB,EAASrC,OAAS,EACrB,IAAK,MAAMuD,KAASlB,EAAU,CAC7B,GAAIe,EAAiBhD,SAASmD,EAAMA,OACnC,SAED,MAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOrC,MAAQoC,EAAMA,MACrBC,EAAO1B,KAAO,GAAHZ,OAAMqC,EAAMI,KAAI,KAAAzC,OAAIqC,EAAMA,MAAK,KAC1CX,EAAYgB,YAAYJ,EACzB,CAED,MAAMK,QAzJApF,eAA8BxB,GACpC,IACC,MAAM6G,QAAelF,MAAM,gEAADsC,OACuCjE,IAE3D8G,QAAcD,EAAOzE,OAC3B,OAAK0E,SAAAA,EAAMC,QAGXjD,QAAQC,IAAI+C,GACLA,EAAKC,OACVlE,QAAQyD,GAAUA,EAAMI,KAAKvD,SAAS,YACtCT,KAAKsE,IACL,MAAMV,EAAQU,EAAUN,KAAKO,QAAQ,UAAW,IAGhD,MAAO,CACNP,KAHYM,EAAUE,YAItBZ,QACA,KAZK,EAcT,CAAE,MAAOa,GAER,OADArD,QAAQsD,MAAMD,GACP,EACR,CACD,CAgI4BE,CAAe7B,GAC1C1B,QAAQC,IAAI,eAAgB6C,GAC5B,MAAMU,EAAqBV,EAAa/D,QACtCyD,IACCH,EAAiBhD,SAASmD,EAAMA,SAChCD,EAAelD,SAASmD,EAAMA,SAGjC,GAAkC,IAA9BgB,EAAmBvE,OACtBe,QAAQC,IAAI,cACN,CACND,QAAQC,IAAI,qBAAsBuD,GAClC,IAAK,MAAMhB,KAASgB,EAAoB,CACvC,MAAMf,EAASC,SAASC,cAAc,UACtCF,EAAOrC,MAAQoC,EAAMA,MACrBC,EAAO1B,KAAO,GAAHZ,OAAMqC,EAAMI,KAAI,KAAAzC,OAAIqC,EAAMA,MAAK,KAC1CX,EAAYgB,YAAYJ,EACzB,CACA/C,EAAQ,oBAAqB6B,KAAKkC,UAAUD,GAC7C,CACA,MAAME,EAAe,IAAIC,IAAI,IAAItB,KAAqBE,KAAmBiB,EAAmB5E,KAAK4D,GAAUA,EAAMA,UACjH,GAAI7B,KAAsBlC,EAAQmF,yBAA0B,CAC3D,IAAKF,EAAaG,IAAIpF,EAAQmF,0BAC7B,OAEDhD,EAAAA,aAAakD,aAAerF,EAAQmF,yBACpC/D,EAAE,wBAAwBkE,IAAInD,EAAAA,aAAakD,cAC3CjE,EAAE,sCAADM,OAAuCS,EAAAA,aAAakD,aAAY,MAE/DE,KAAK,YAAY,EACpB,CAED,CClNA,MAAMC,EAAWC,OAAOZ;;;;;;ACCxB,MAAMa,EAAEC,WAAWf,EAAEc,EAAEE,kBAAa,IAASF,EAAEG,UAAUH,EAAEG,SAASC,eAAe,uBAAuBC,SAAS9H,WAAW,YAAY+H,cAAc/H,UAAUgI,EAAEC,SAASxI,EAAE,IAAIyI,QAAQ,MAAMC,EAAE,WAAAC,CAAYX,EAAEd,EAAElH,GAAG,GAAG4I,KAAKC,cAAa,EAAG7I,IAAIuI,EAAE,MAAMO,MAAM,qEAAqEF,KAAKG,QAAQf,EAAEY,KAAKZ,EAAEd,CAAC,CAAC,cAAI8B,GAAa,IAAIhB,EAAEY,KAAK5I,EAAE,MAAMuI,EAAEK,KAAKZ,EAAE,GAAGd,QAAG,IAASc,EAAE,CAAC,MAAMd,OAAE,IAASqB,GAAG,IAAIA,EAAEzF,OAAOoE,IAAIc,EAAEhI,EAAEI,IAAImI,SAAI,IAASP,KAAKY,KAAK5I,EAAEgI,EAAE,IAAIM,eAAeW,YAAYL,KAAKG,SAAS7B,GAAGlH,EAAEkJ,IAAIX,EAAEP,GAAG,CAAC,OAAOA,CAAC,CAAC,QAAAmB,GAAW,OAAOP,KAAKG,OAAO,EAAE,MAA8YK,EAAE,CAACb,EAAEvI,KAAK,GAAGkH,EAAEqB,EAAEc,mBAAmBrJ,EAAEyC,KAAKuF,GAAGA,aAAaM,cAAcN,EAAEA,EAAEgB,kBAAkB,IAAI,MAAM9B,KAAKlH,EAAE,CAAC,MAAMA,EAAEuG,SAASC,cAAc,SAASkC,EAAEV,EAAEsB,cAAS,IAASZ,GAAG1I,EAAEuJ,aAAa,QAAQb,GAAG1I,EAAE+D,YAAYmD,EAAE6B,QAAQR,EAAE7B,YAAY1G,EAAE,GAAGwJ,EAAEtC,EAAEc,GAAGA,EAAEA,GAAGA,aAAaM,cAAc,CAACN,IAAI,IAAId,EAAE,GAAG,IAAI,MAAMqB,KAAKP,EAAEyB,SAASvC,GAAGqB,EAAEQ,QAAQ,MAAztBf,IAAG,IAAIU,EAAE,iBAAiBV,EAAEA,EAAEA,EAAE,QAAG,EAAOO,GAAsrBmB,CAAExC,EAAG,EAAjE,CAAmEc,GAAGA,GCAlzC2B,GAAG,EAAEzJ,eAAe,EAAE0J,yBAAyB,EAAEC,oBAAoBC,EAAEC,sBAAsB,EAAEC,eAAe,GAAG/J,OAAOgK,EAAEhC,WAAW,EAAEgC,EAAEC,aAAaC,EAAE,EAAE,EAAEC,YAAY,GAAGC,EAAEJ,EAAEK,+BAA+B1J,EAAE,CAACoH,EAAEO,IAAIP,EAAEuC,EAAE,CAAC,WAAAC,CAAYxC,EAAEO,GAAG,OAAOA,GAAG,KAAKkC,QAAQzC,EAAEA,EAAEmC,EAAE,KAAK,MAAM,KAAKlK,OAAO,KAAK2F,MAAMoC,EAAE,MAAMA,EAAEA,EAAE5C,KAAKkC,UAAUU,GAAG,OAAOA,CAAC,EAAE,aAAA0C,CAAc1C,EAAEO,GAAG,IAAIoC,EAAE3C,EAAE,OAAOO,GAAG,KAAKkC,QAAQE,EAAE,OAAO3C,EAAE,MAAM,KAAK4C,OAAOD,EAAE,OAAO3C,EAAE,KAAK4C,OAAO5C,GAAG,MAAM,KAAK/H,OAAO,KAAK2F,MAAM,IAAI+E,EAAEvF,KAAKC,MAAM2C,EAAE,CAAC,MAAMA,GAAG2C,EAAE,IAAI,EAAE,OAAOA,CAAC,GAAGE,EAAE,CAAC7C,EAAEO,KAAK,EAAEP,EAAEO,GAAG,EAAE,CAACuC,WAAU,EAAGC,KAAKC,OAAOC,UAAUV,EAAEW,SAAQ,EAAGC,WAAWN,GAAGrC,OAAO4C,WAAW5C,OAAO,YAAYyB,EAAEoB,sBAAsB,IAAI5C,QAAQ,MAAM6C,UAAUC,YAAY,qBAAOC,CAAexD,GAAGY,KAAK6C,QAAQ7C,KAAKuB,IAAI,IAAI9G,KAAK2E,EAAE,CAAC,6BAAW0D,GAAqB,OAAO9C,KAAK+C,WAAW/C,KAAKgD,MAAM,IAAIhD,KAAKgD,KAAKC,OAAO,CAAC,qBAAOC,CAAe9D,EAAEO,EAAE,GAAG,GAAGA,EAAEwD,QAAQxD,EAAEuC,WAAU,GAAIlC,KAAK6C,OAAO7C,KAAKoD,kBAAkB9C,IAAIlB,EAAEO,IAAIA,EAAE0D,WAAW,CAAC,MAAMtB,EAAEnC,SAASkB,EAAEd,KAAKsD,sBAAsBlE,EAAE2C,EAAEpC,QAAG,IAASmB,GAAG,EAAEd,KAAKrI,UAAUyH,EAAE0B,EAAE,CAAC,CAAC,4BAAOwC,CAAsBlE,EAAEO,EAAEoC,GAAG,MAAMvK,IAAI8G,EAAEgC,IAAIY,GAAG,EAAElB,KAAKrI,UAAUyH,IAAI,CAAC,GAAA5H,GAAM,OAAOwI,KAAKL,EAAE,EAAE,GAAAW,CAAIlB,GAAGY,KAAKL,GAAGP,CAAC,GAAG,MAAM,CAAC,GAAA5H,GAAM,OAAO8G,GAAGzG,KAAKmI,KAAK,EAAE,GAAAM,CAAIX,GAAG,MAAMmB,EAAExC,GAAGzG,KAAKmI,MAAMkB,EAAErJ,KAAKmI,KAAKL,GAAGK,KAAKuD,cAAcnE,EAAE0B,EAAEiB,EAAE,EAAEyB,cAAa,EAAGjM,YAAW,EAAG,CAAC,yBAAOkM,CAAmBrE,GAAG,OAAOY,KAAKoD,kBAAkB5L,IAAI4H,IAAI,CAAC,CAAC,WAAOyD,GAAO,GAAG7C,KAAKpI,eAAeI,EAAE,sBAAsB,OAAO,MAAMoH,EAAE,EAAEY,MAAMZ,EAAE2D,gBAAW,IAAS3D,EAAEmC,IAAIvB,KAAKuB,EAAE,IAAInC,EAAEmC,IAAIvB,KAAKoD,kBAAkB,IAAIM,IAAItE,EAAEgE,kBAAkB,CAAC,eAAOL,GAAW,GAAG/C,KAAKpI,eAAeI,EAAE,cAAc,OAAO,GAAGgI,KAAK2D,WAAU,EAAG3D,KAAK6C,OAAO7C,KAAKpI,eAAeI,EAAE,eAAe,CAAC,MAAMoH,EAAEY,KAAK4D,WAAWjE,EAAE,IAAIuB,EAAE9B,MAAM,EAAEA,IAAI,IAAI,MAAM2C,KAAKpC,EAAEK,KAAKkD,eAAenB,EAAE3C,EAAE2C,GAAG,CAAC,MAAM3C,EAAEY,KAAKJ,OAAO4C,UAAU,GAAG,OAAOpD,EAAE,CAAC,MAAMO,EAAE8C,oBAAoBjL,IAAI4H,GAAG,QAAG,IAASO,EAAE,IAAI,MAAMP,EAAE2C,KAAKpC,EAAEK,KAAKoD,kBAAkB9C,IAAIlB,EAAE2C,EAAE,CAAC/B,KAAKgD,KAAK,IAAIU,IAAI,IAAI,MAAMtE,EAAEO,KAAKK,KAAKoD,kBAAkB,CAAC,MAAMrB,EAAE/B,KAAK6D,KAAKzE,EAAEO,QAAG,IAASoC,GAAG/B,KAAKgD,KAAK1C,IAAIyB,EAAE3C,EAAE,CAACY,KAAK8D,cAAc9D,KAAK+D,eAAe/D,KAAKgE,OAAO,CAAC,qBAAOD,CAAepE,GAAG,MAAMoC,EAAE,GAAG,GAAG/E,MAAMiH,QAAQtE,GAAG,CAAC,MAAMrB,EAAE,IAAIM,IAAIe,EAAEpC,KAAK,KAAK2G,WAAW,IAAI,MAAMvE,KAAKrB,EAAEyD,EAAEoC,QAAQ,EAAExE,GAAG,WAAM,IAASA,GAAGoC,EAAEtH,KAAK,EAAEkF,IAAI,OAAOoC,CAAC,CAAC,WAAO8B,CAAKzE,EAAEO,GAAG,MAAMoC,EAAEpC,EAAEuC,UAAU,OAAM,IAAKH,OAAE,EAAO,iBAAiBA,EAAEA,EAAE,iBAAiB3C,EAAEA,EAAEgF,mBAAc,CAAM,CAAC,WAAArE,GAAcsE,QAAQrE,KAAKsE,UAAK,EAAOtE,KAAKuE,iBAAgB,EAAGvE,KAAKwE,YAAW,EAAGxE,KAAKyE,KAAK,KAAKzE,KAAK0E,MAAM,CAAC,IAAAA,GAAO1E,KAAK2E,KAAK,IAAIC,SAASxF,GAAGY,KAAK6E,eAAezF,IAAIY,KAAK8E,KAAK,IAAIpB,IAAI1D,KAAK+E,OAAO/E,KAAKuD,gBAAgBvD,KAAKD,YAAYwB,GAAGyD,SAAS5F,GAAGA,EAAEY,OAAO,CAAC,aAAAiF,CAAc7F,IAAIY,KAAKkF,OAAO,IAAItG,KAAKuG,IAAI/F,QAAG,IAASY,KAAKoF,YAAYpF,KAAKqF,aAAajG,EAAEkG,iBAAiB,CAAC,gBAAAC,CAAiBnG,GAAGY,KAAKkF,MAAMM,OAAOpG,EAAE,CAAC,IAAA2F,GAAO,MAAM3F,EAAE,IAAIsE,IAAI/D,EAAEK,KAAKD,YAAYqD,kBAAkB,IAAI,MAAMrB,KAAKpC,EAAEsD,OAAOjD,KAAKpI,eAAemK,KAAK3C,EAAEkB,IAAIyB,EAAE/B,KAAK+B,WAAW/B,KAAK+B,IAAI3C,EAAEqG,KAAK,IAAIzF,KAAKsE,KAAKlF,EAAE,CAAC,gBAAAsG,GAAmB,MAAMtG,EAAEY,KAAK2F,YAAY3F,KAAK4F,aAAa5F,KAAKD,YAAY8F,mBAAmB,OAAO,EAAEzG,EAAEY,KAAKD,YAAY+D,eAAe1E,CAAC,CAAC,iBAAA0G,GAAoB9F,KAAKoF,aAAapF,KAAK0F,mBAAmB1F,KAAK6E,gBAAe,GAAI7E,KAAKkF,MAAMF,SAAS5F,GAAGA,EAAEkG,mBAAmB,CAAC,cAAAT,CAAezF,GAAG,CAAC,oBAAA2G,GAAuB/F,KAAKkF,MAAMF,SAAS5F,GAAGA,EAAE4G,sBAAsB,CAAC,wBAAAC,CAAyB7G,EAAEO,EAAEoC,GAAG/B,KAAKkG,KAAK9G,EAAE2C,EAAE,CAAC,IAAAoE,CAAK/G,EAAEO,GAAG,MAAMoC,EAAE/B,KAAKD,YAAYqD,kBAAkB5L,IAAI4H,GAAGd,EAAE0B,KAAKD,YAAY8D,KAAKzE,EAAE2C,GAAG,QAAG,IAASzD,IAAG,IAAKyD,EAAEO,QAAQ,CAAC,MAAMxB,QAAG,IAASiB,EAAEM,WAAWT,YAAYG,EAAEM,UAAUV,GAAGC,YAAYjC,EAAEoC,EAAEI,MAAMnC,KAAKyE,KAAKrF,EAAE,MAAM0B,EAAEd,KAAKoG,gBAAgB9H,GAAG0B,KAAKW,aAAarC,EAAEwC,GAAGd,KAAKyE,KAAK,IAAI,CAAC,CAAC,IAAAyB,CAAK9G,EAAEO,GAAG,MAAMoC,EAAE/B,KAAKD,YAAYzB,EAAEyD,EAAEiB,KAAKxL,IAAI4H,GAAG,QAAG,IAASd,GAAG0B,KAAKyE,OAAOnG,EAAE,CAAC,MAAMc,EAAE2C,EAAE0B,mBAAmBnF,GAAGwC,EAAE,mBAAmB1B,EAAEiD,UAAU,CAACP,cAAc1C,EAAEiD,gBAAW,IAASjD,EAAEiD,WAAWP,cAAc1C,EAAEiD,UAAUV,EAAE3B,KAAKyE,KAAKnG,EAAE0B,KAAK1B,GAAGwC,EAAEgB,cAAcnC,EAAEP,EAAE+C,MAAMnC,KAAKyE,KAAK,IAAI,CAAC,CAAC,aAAAlB,CAAcnE,EAAEO,EAAEoC,GAAG,QAAG,IAAS3C,EAAE,CAAC,GAAG2C,IAAI/B,KAAKD,YAAY0D,mBAAmBrE,KAAK2C,EAAEQ,YAAYN,GAAGjC,KAAKZ,GAAGO,GAAG,OAAOK,KAAKqG,EAAEjH,EAAEO,EAAEoC,EAAE,EAAC,IAAK/B,KAAKuE,kBAAkBvE,KAAK2E,KAAK3E,KAAKsG,OAAO,CAAC,CAAAD,CAAEjH,EAAEO,EAAEoC,GAAG/B,KAAK8E,KAAKhG,IAAIM,IAAIY,KAAK8E,KAAKxE,IAAIlB,EAAEO,IAAG,IAAKoC,EAAEO,SAAStC,KAAKyE,OAAOrF,IAAIY,KAAKuG,OAAO,IAAI3H,KAAKuG,IAAI/F,EAAE,CAAC,UAAMkH,GAAOtG,KAAKuE,iBAAgB,EAAG,UAAUvE,KAAK2E,IAAI,CAAC,MAAMvF,GAAGwF,QAAQ4B,OAAOpH,EAAE,CAAC,MAAMA,EAAEY,KAAKyG,iBAAiB,OAAO,MAAMrH,SAASA,GAAGY,KAAKuE,eAAe,CAAC,cAAAkC,GAAiB,OAAOzG,KAAK0G,eAAe,CAAC,aAAAA,GAAgB,IAAI1G,KAAKuE,gBAAgB,OAAO,IAAIvE,KAAKwE,WAAW,CAAC,GAAGxE,KAAKoF,aAAapF,KAAK0F,mBAAmB1F,KAAKsE,KAAK,CAAC,IAAI,MAAMlF,EAAEO,KAAKK,KAAKsE,KAAKtE,KAAKZ,GAAGO,EAAEK,KAAKsE,UAAK,CAAM,CAAC,MAAMlF,EAAEY,KAAKD,YAAYqD,kBAAkB,GAAGhE,EAAEqG,KAAK,EAAE,IAAI,MAAM9F,EAAEoC,KAAK3C,GAAE,IAAK2C,EAAE4E,SAAS3G,KAAK8E,KAAKhG,IAAIa,SAAI,IAASK,KAAKL,IAAIK,KAAKqG,EAAE1G,EAAEK,KAAKL,GAAGoC,EAAE,CAAC,IAAI3C,GAAE,EAAG,MAAMO,EAAEK,KAAK8E,KAAK,IAAI1F,EAAEY,KAAK4G,aAAajH,GAAGP,GAAGY,KAAK6G,WAAWlH,GAAGK,KAAKkF,MAAMF,SAAS5F,GAAGA,EAAE0H,iBAAiB9G,KAAK+G,OAAOpH,IAAIK,KAAKgH,MAAM,CAAC,MAAMrH,GAAG,MAAMP,GAAE,EAAGY,KAAKgH,OAAOrH,CAAC,CAACP,GAAGY,KAAKiH,KAAKtH,EAAE,CAAC,UAAAkH,CAAWzH,GAAG,CAAC,IAAA6H,CAAK7H,GAAGY,KAAKkF,MAAMF,SAAS5F,GAAGA,EAAE8H,kBAAkBlH,KAAKwE,aAAaxE,KAAKwE,YAAW,EAAGxE,KAAKmH,aAAa/H,IAAIY,KAAKoH,QAAQhI,EAAE,CAAC,IAAA4H,GAAOhH,KAAK8E,KAAK,IAAIpB,IAAI1D,KAAKuE,iBAAgB,CAAE,CAAC,kBAAI8C,GAAiB,OAAOrH,KAAKsH,mBAAmB,CAAC,iBAAAA,GAAoB,OAAOtH,KAAK2E,IAAI,CAAC,YAAAiC,CAAaxH,GAAG,OAAM,CAAE,CAAC,MAAA2H,CAAO3H,GAAGY,KAAKuG,OAAOvG,KAAKuG,KAAKvB,SAAS5F,GAAGY,KAAKmG,KAAK/G,EAAEY,KAAKZ,MAAMY,KAAKgH,MAAM,CAAC,OAAAI,CAAQhI,GAAG,CAAC,YAAA+H,CAAa/H,GAAG,EAAEsD,EAAEoB,cAAc,GAAGpB,EAAEmD,kBAAkB,CAAC0B,KAAK,QAAQ7E,EAAE1K,EAAE,sBAAsB,IAAI0L,IAAIhB,EAAE1K,EAAE,cAAc,IAAI0L,IAAIjC,IAAI,CAAC+F,gBAAgB9E,KAAKrB,EAAEoG,0BAA0B,IAAIhN,KAAK;;;;;;ACAj7K,MAAM,EAAE4E,WAAW,EAAE,EAAEiC,aAAa,EAAE,EAAE,EAAEoG,aAAa,WAAW,CAACC,WAAWvI,GAAGA,SAAI,EAAO,EAAE,QAAQ,EAAE,OAAOwI,KAAKC,SAASC,QAAQ,GAAGC,MAAM,MAAM,EAAE,IAAI,EAAE,EAAE,IAAI,KAAK,EAAEpK,SAAS,EAAE,IAAI,EAAEqK,cAAc,IAAI,EAAE5I,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,mBAAmBA,EAAE,EAAEpC,MAAMiH,QAAQ,EAAE7E,GAAG,EAAEA,IAAI,mBAAmBA,IAAIQ,OAAOqI,UAAU,GAAE,cAAc,GAAE,sDAAsDnO,GAAE,OAAOoO,GAAE,KAAKC,GAAEC,OAAO,KAAK,uBAAsB,OAAM,wCAAuC,KAAK,GAAE,KAAKC,GAAE,KAAK,GAAE,qCAAqC,GAAEjJ,GAAG,CAAC2C,KAAKpC,KAAI,CAAE2I,WAAWlJ,EAAEmJ,QAAQxG,EAAEyG,OAAO7I,IAAI,GAAE,GAAE,GAAiB8I,IAAZ,GAAE,GAAK,GAAE,GAAK7I,OAAO8I,IAAI,iBAAgBC,GAAE/I,OAAO8I,IAAI,eAAeE,GAAE,IAAI/I,QAAQgJ,GAAE,EAAEC,iBAAiB,EAAE,KAAK,SAASzC,GAAEjH,EAAE2C,GAAG,IAAI,EAAE3C,KAAKA,EAAExH,eAAe,OAAO,MAAMsI,MAAM,kCAAkC,YAAO,IAAS,EAAE,EAAEyH,WAAW5F,GAAGA,CAAC,CAAC,MAAMgH,GAAE,CAAC3J,EAAE2C,KAAK,MAAMpC,EAAEP,EAAElF,OAAO,EAAE9C,EAAE,GAAG,IAAI0J,EAAES,EAAE,IAAIQ,EAAE,QAAQ,IAAIA,EAAE,SAAS,GAAGnB,EAAE,GAAE,IAAI,IAAImB,EAAE,EAAEA,EAAEpC,EAAEoC,IAAI,CAAC,MAAMpC,EAAEP,EAAE2C,GAAG,IAAIV,EAAEM,EAAE3J,GAAG,EAAEF,EAAE,EAAE,KAAKA,EAAE6H,EAAEzF,SAAS0G,EAAEoI,UAAUlR,EAAE6J,EAAEf,EAAEqI,KAAKtJ,GAAG,OAAOgC,IAAI7J,EAAE8I,EAAEoI,UAAUpI,IAAI,GAAE,QAAQe,EAAE,GAAGf,EAAE9G,QAAE,IAAS6H,EAAE,GAAGf,EAAEsH,QAAE,IAASvG,EAAE,IAAI,GAAEuH,KAAKvH,EAAE,MAAMb,EAAEsH,OAAO,KAAKzG,EAAE,GAAG,MAAMf,EAAEuH,SAAG,IAASxG,EAAE,KAAKf,EAAEuH,IAAGvH,IAAIuH,GAAE,MAAMxG,EAAE,IAAIf,EAAEE,GAAG,GAAE9I,GAAG,QAAG,IAAS2J,EAAE,GAAG3J,GAAG,GAAGA,EAAE4I,EAAEoI,UAAUrH,EAAE,GAAGzH,OAAOmH,EAAEM,EAAE,GAAGf,OAAE,IAASe,EAAE,GAAGwG,GAAE,MAAMxG,EAAE,GAAG0G,GAAE,IAAGzH,IAAIyH,IAAGzH,IAAI,GAAEA,EAAEuH,GAAEvH,IAAI9G,IAAG8G,IAAIsH,GAAEtH,EAAE,IAAGA,EAAEuH,GAAErH,OAAE,GAAQ,MAAM/I,EAAE6I,IAAIuH,IAAG/I,EAAE2C,EAAE,GAAG9H,WAAW,MAAM,IAAI,GAAGsH,GAAGX,IAAI,GAAEjB,EAAE,EAAE3H,GAAG,GAAGZ,EAAEqD,KAAK4G,GAAG1B,EAAEoI,MAAM,EAAE/P,GAAG,EAAE2H,EAAEoI,MAAM/P,GAAG,EAAED,GAAG4H,EAAE,IAAI,IAAI3H,EAAE+J,EAAEhK,EAAE,CAAC,MAAM,CAACsO,GAAEjH,EAAEmC,GAAGnC,EAAEO,IAAI,QAAQ,IAAIoC,EAAE,SAAS,IAAIA,EAAE,UAAU,KAAK3K,EAAC,EAAG,MAAM+R,GAAE,WAAApJ,EAAawI,QAAQnJ,EAAEkJ,WAAW3I,GAAGG,GAAG,IAAIgB,EAAEd,KAAKoJ,MAAM,GAAG,IAAIxI,EAAE,EAAES,EAAE,EAAE,MAAMM,EAAEvC,EAAElF,OAAO,EAAElC,EAAEgI,KAAKoJ,OAAOnH,EAAEnI,GAAGiP,GAAE3J,EAAEO,GAAG,GAAGK,KAAK3C,GAAG8L,GAAEvL,cAAcqE,EAAEnC,GAAG+I,GAAEQ,YAAYrJ,KAAK3C,GAAGiM,QAAQ,IAAI3J,GAAG,IAAIA,EAAE,CAAC,MAAMP,EAAEY,KAAK3C,GAAGiM,QAAQC,WAAWnK,EAAEoK,eAAepK,EAAEqK,WAAW,CAAC,KAAK,QAAQ3I,EAAE+H,GAAEa,aAAa1R,EAAEkC,OAAOyH,GAAG,CAAC,GAAG,IAAIb,EAAE6I,SAAS,CAAC,GAAG7I,EAAE8I,gBAAgB,IAAI,MAAMxK,KAAK0B,EAAE+I,oBAAoB,GAAGzK,EAAE0K,SAAS,GAAG,CAAC,MAAM/H,EAAEjI,EAAEuH,KAAK1B,EAAEmB,EAAEiJ,aAAa3K,GAAGxF,MAAM,GAAG0E,EAAE,eAAe2K,KAAKlH,GAAG/J,EAAEyC,KAAK,CAAC0H,KAAK,EAAE6H,MAAMpJ,EAAE/C,KAAKS,EAAE,GAAGiK,QAAQ5I,EAAEsK,KAAK,MAAM3L,EAAE,GAAG4L,GAAE,MAAM5L,EAAE,GAAG6L,GAAE,MAAM7L,EAAE,GAAG8L,GAAEC,KAAIvJ,EAAEsF,gBAAgBhH,EAAE,MAAMA,EAAEnF,WAAW,KAAKjC,EAAEyC,KAAK,CAAC0H,KAAK,EAAE6H,MAAMpJ,IAAIE,EAAEsF,gBAAgBhH,IAAI,GAAG,GAAE8J,KAAKpI,EAAEwJ,SAAS,CAAC,MAAMlL,EAAE0B,EAAE3F,YAAYvB,MAAM,GAAG+F,EAAEP,EAAElF,OAAO,EAAE,GAAGyF,EAAE,EAAE,CAACmB,EAAE3F,YAAY,EAAE,EAAEqG,YAAY,GAAG,IAAI,IAAIO,EAAE,EAAEA,EAAEpC,EAAEoC,IAAIjB,EAAEyJ,OAAOnL,EAAE2C,GAAG,KAAK8G,GAAEa,WAAW1R,EAAEyC,KAAK,CAAC0H,KAAK,EAAE6H,QAAQpJ,IAAIE,EAAEyJ,OAAOnL,EAAEO,GAAG,IAAI,CAAC,CAAC,MAAM,GAAG,IAAImB,EAAE6I,SAAS,GAAG7I,EAAE7C,OAAO,EAAEjG,EAAEyC,KAAK,CAAC0H,KAAK,EAAE6H,MAAMpJ,QAAQ,CAAC,IAAIxB,GAAG,EAAE,MAAM,KAAKA,EAAE0B,EAAE7C,KAAKzD,QAAQ,EAAE4E,EAAE,KAAKpH,EAAEyC,KAAK,CAAC0H,KAAK,EAAE6H,MAAMpJ,IAAIxB,GAAG,EAAElF,OAAO,CAAC,CAAC0G,GAAG,CAAC,CAAC,oBAAOhD,CAAcwB,EAAE2C,GAAG,MAAMpC,EAAE,EAAE/B,cAAc,YAAY,OAAO+B,EAAE6K,UAAUpL,EAAEO,CAAC,EAAE,SAAS,GAAEP,EAAE2C,EAAEpC,EAAEP,EAAEd,GAAG,GAAGyD,IAAI0G,GAAE,OAAO1G,EAAE,IAAIb,OAAE,IAAS5C,EAAEqB,EAAE8K,OAAOnM,GAAGqB,EAAE+K,KAAK,MAAMtT,EAAE,EAAE2K,QAAG,EAAOA,EAAE4I,gBAAgB,OAAOzJ,GAAGnB,cAAc3I,IAAI8J,GAAG0J,QAAO,QAAI,IAASxT,EAAE8J,OAAE,GAAQA,EAAE,IAAI9J,EAAEgI,GAAG8B,EAAE2J,KAAKzL,EAAEO,EAAErB,SAAI,IAASA,GAAGqB,EAAE8K,OAAO,IAAInM,GAAG4C,EAAEvB,EAAE+K,KAAKxJ,QAAG,IAASA,IAAIa,EAAE,GAAE3C,EAAE8B,EAAE4J,KAAK1L,EAAE2C,EAAEyG,QAAQtH,EAAE5C,IAAIyD,CAAC,CAAC,MAAMgJ,GAAE,WAAAhL,CAAYX,EAAE2C,GAAG/B,KAAKgL,KAAK,GAAGhL,KAAKiL,UAAK,EAAOjL,KAAKkL,KAAK9L,EAAEY,KAAKmL,KAAKpJ,CAAC,CAAC,cAAIqJ,GAAa,OAAOpL,KAAKmL,KAAKC,UAAU,CAAC,QAAIC,GAAO,OAAOrL,KAAKmL,KAAKE,IAAI,CAAC,CAAA1J,CAAEvC,GAAG,MAAM/B,IAAIiM,QAAQvH,GAAGqH,MAAMzJ,GAAGK,KAAKkL,KAAK5M,GAAGc,GAAGkM,eAAe,GAAGC,WAAWxJ,GAAE,GAAI8G,GAAEQ,YAAY/K,EAAE,IAAI4C,EAAE2H,GAAEa,WAAWtS,EAAE,EAAE0I,EAAE,EAAEyB,EAAE5B,EAAE,GAAG,UAAK,IAAS4B,GAAG,CAAC,GAAGnK,IAAImK,EAAEyI,MAAM,CAAC,IAAIjI,EAAE,IAAIR,EAAEY,KAAKJ,EAAE,IAAIyJ,GAAEtK,EAAEA,EAAEuK,YAAYzL,KAAKZ,GAAG,IAAImC,EAAEY,KAAKJ,EAAE,IAAIR,EAAE0I,KAAK/I,EAAEK,EAAE1D,KAAK0D,EAAEgH,QAAQvI,KAAKZ,GAAG,IAAImC,EAAEY,OAAOJ,EAAE,IAAI2J,GAAExK,EAAElB,KAAKZ,IAAIY,KAAKgL,KAAKvQ,KAAKsH,GAAGR,EAAE5B,IAAIG,EAAE,CAAC1I,IAAImK,GAAGyI,QAAQ9I,EAAE2H,GAAEa,WAAWtS,IAAI,CAAC,OAAOyR,GAAEQ,YAAY,EAAE/K,CAAC,CAAC,CAAAmD,CAAErC,GAAG,IAAI2C,EAAE,EAAE,IAAI,MAAMpC,KAAKK,KAAKgL,UAAK,IAASrL,SAAI,IAASA,EAAE4I,SAAS5I,EAAEgM,KAAKvM,EAAEO,EAAEoC,GAAGA,GAAGpC,EAAE4I,QAAQrO,OAAO,GAAGyF,EAAEgM,KAAKvM,EAAE2C,KAAKA,GAAG,EAAE,MAAMyJ,GAAE,QAAIH,GAAO,OAAOrL,KAAKmL,MAAME,MAAMrL,KAAK4L,IAAI,CAAC,WAAA7L,CAAYX,EAAE2C,EAAEpC,EAAErB,GAAG0B,KAAKmC,KAAK,EAAEnC,KAAK6L,KAAKlD,GAAE3I,KAAKiL,UAAK,EAAOjL,KAAK8L,KAAK1M,EAAEY,KAAK+L,KAAKhK,EAAE/B,KAAKmL,KAAKxL,EAAEK,KAAKgM,QAAQ1N,EAAE0B,KAAK4L,KAAKtN,GAAG+G,cAAa,CAAE,CAAC,cAAI+F,GAAa,IAAIhM,EAAEY,KAAK8L,KAAKV,WAAW,MAAMrJ,EAAE/B,KAAKmL,KAAK,YAAO,IAASpJ,GAAG,KAAK3C,GAAGuK,WAAWvK,EAAE2C,EAAEqJ,YAAYhM,CAAC,CAAC,aAAI6M,GAAY,OAAOjM,KAAK8L,IAAI,CAAC,WAAII,GAAU,OAAOlM,KAAK+L,IAAI,CAAC,IAAAJ,CAAKvM,EAAE2C,EAAE/B,MAAMZ,EAAE,GAAEY,KAAKZ,EAAE2C,GAAG,EAAE3C,GAAGA,IAAIuJ,IAAG,MAAMvJ,GAAG,KAAKA,GAAGY,KAAK6L,OAAOlD,IAAG3I,KAAKmM,OAAOnM,KAAK6L,KAAKlD,IAAGvJ,IAAIY,KAAK6L,MAAMzM,IAAIqJ,IAAGzI,KAAKkI,EAAE9I,QAAG,IAASA,EAAEkJ,WAAWtI,KAAKlF,EAAEsE,QAAG,IAASA,EAAEuK,SAAS3J,KAAKyI,EAAErJ,GAAG,EAAEA,GAAGY,KAAKqK,EAAEjL,GAAGY,KAAKkI,EAAE9I,EAAE,CAAC,CAAAgN,CAAEhN,GAAG,OAAOY,KAAK8L,KAAKV,WAAWiB,aAAajN,EAAEY,KAAK+L,KAAK,CAAC,CAAAtD,CAAErJ,GAAGY,KAAK6L,OAAOzM,IAAIY,KAAKmM,OAAOnM,KAAK6L,KAAK7L,KAAKoM,EAAEhN,GAAG,CAAC,CAAA8I,CAAE9I,GAAGY,KAAK6L,OAAOlD,IAAG,EAAE3I,KAAK6L,MAAM7L,KAAK8L,KAAKL,YAAYxN,KAAKmB,EAAEY,KAAKyI,EAAE,EAAE6D,eAAelN,IAAIY,KAAK6L,KAAKzM,CAAC,CAAC,CAAAtE,CAAEsE,GAAG,MAAMoJ,OAAOzG,EAAEuG,WAAW3I,GAAGP,EAAEd,EAAE,iBAAiBqB,EAAEK,KAAKuM,KAAKnN,SAAI,IAASO,EAAEtC,KAAKsC,EAAEtC,GAAG8L,GAAEvL,cAAcyI,GAAE1G,EAAEuB,EAAEvB,EAAEuB,EAAE,IAAIlB,KAAKgM,UAAUrM,GAAG,GAAGK,KAAK6L,MAAMX,OAAO5M,EAAE0B,KAAK6L,KAAKpK,EAAEM,OAAO,CAAC,MAAM3C,EAAE,IAAI2L,GAAEzM,EAAE0B,MAAML,EAAEP,EAAEuC,EAAE3B,KAAKgM,SAAS5M,EAAEqC,EAAEM,GAAG/B,KAAKyI,EAAE9I,GAAGK,KAAK6L,KAAKzM,CAAC,CAAC,CAAC,IAAAmN,CAAKnN,GAAG,IAAI2C,EAAE6G,GAAEpR,IAAI4H,EAAEmJ,SAAS,YAAO,IAASxG,GAAG6G,GAAEtI,IAAIlB,EAAEmJ,QAAQxG,EAAE,IAAIoH,GAAE/J,IAAI2C,CAAC,CAAC,CAAAsI,CAAEjL,GAAG,EAAEY,KAAK6L,QAAQ7L,KAAK6L,KAAK,GAAG7L,KAAKmM,QAAQ,MAAMpK,EAAE/B,KAAK6L,KAAK,IAAIlM,EAAErB,EAAE,EAAE,IAAI,MAAM4C,KAAK9B,EAAEd,IAAIyD,EAAE7H,OAAO6H,EAAEtH,KAAKkF,EAAE,IAAI6L,GAAExL,KAAKoM,EAAE,KAAKpM,KAAKoM,EAAE,KAAKpM,KAAKA,KAAKgM,UAAUrM,EAAEoC,EAAEzD,GAAGqB,EAAEgM,KAAKzK,GAAG5C,IAAIA,EAAEyD,EAAE7H,SAAS8F,KAAKmM,KAAKxM,GAAGA,EAAEoM,KAAKN,YAAYnN,GAAGyD,EAAE7H,OAAOoE,EAAE,CAAC,IAAA6N,CAAK/M,EAAEY,KAAK8L,KAAKL,YAAY1J,GAAG,IAAI/B,KAAKwM,QAAO,GAAG,EAAGzK,GAAG3C,GAAGA,IAAIY,KAAK+L,MAAM,CAAC,MAAMhK,EAAE3C,EAAEqM,YAAYrM,EAAEqN,SAASrN,EAAE2C,CAAC,CAAC,CAAC,YAAA2K,CAAatN,QAAG,IAASY,KAAKmL,OAAOnL,KAAK4L,KAAKxM,EAAEY,KAAKwM,OAAOpN,GAAG,EAAE,MAAMiL,GAAE,WAAIC,GAAU,OAAOtK,KAAK2M,QAAQrC,OAAO,CAAC,QAAIe,GAAO,OAAOrL,KAAKmL,KAAKE,IAAI,CAAC,WAAAtL,CAAYX,EAAE2C,EAAEpC,EAAErB,EAAE4C,GAAGlB,KAAKmC,KAAK,EAAEnC,KAAK6L,KAAKlD,GAAE3I,KAAKiL,UAAK,EAAOjL,KAAK2M,QAAQvN,EAAEY,KAAKnC,KAAKkE,EAAE/B,KAAKmL,KAAK7M,EAAE0B,KAAKgM,QAAQ9K,EAAEvB,EAAEzF,OAAO,GAAG,KAAKyF,EAAE,IAAI,KAAKA,EAAE,IAAIK,KAAK6L,KAAK7O,MAAM2C,EAAEzF,OAAO,GAAG0S,KAAK,IAAIxK,QAAQpC,KAAKuI,QAAQ5I,GAAGK,KAAK6L,KAAKlD,EAAC,CAAC,IAAAgD,CAAKvM,EAAE2C,EAAE/B,KAAKL,EAAErB,GAAG,MAAM4C,EAAElB,KAAKuI,QAAQ,IAAInR,GAAE,EAAG,QAAG,IAAS8J,EAAE9B,EAAE,GAAEY,KAAKZ,EAAE2C,EAAE,GAAG3K,GAAG,EAAEgI,IAAIA,IAAIY,KAAK6L,MAAMzM,IAAIqJ,GAAErR,IAAI4I,KAAK6L,KAAKzM,OAAO,CAAC,MAAMd,EAAEc,EAAE,IAAIU,EAAEgB,EAAE,IAAI1B,EAAE8B,EAAE,GAAGpB,EAAE,EAAEA,EAAEoB,EAAEhH,OAAO,EAAE4F,IAAIgB,EAAE,GAAEd,KAAK1B,EAAEqB,EAAEG,GAAGiC,EAAEjC,GAAGgB,IAAI2H,KAAI3H,EAAEd,KAAK6L,KAAK/L,IAAI1I,KAAK,EAAE0J,IAAIA,IAAId,KAAK6L,KAAK/L,GAAGgB,IAAI6H,GAAEvJ,EAAEuJ,GAAEvJ,IAAIuJ,KAAIvJ,IAAI0B,GAAG,IAAII,EAAEpB,EAAE,IAAIE,KAAK6L,KAAK/L,GAAGgB,CAAC,CAAC1J,IAAIkH,GAAG0B,KAAK6M,EAAEzN,EAAE,CAAC,CAAAyN,CAAEzN,GAAGA,IAAIuJ,GAAE3I,KAAK2M,QAAQvG,gBAAgBpG,KAAKnC,MAAMmC,KAAK2M,QAAQhM,aAAaX,KAAKnC,KAAKuB,GAAG,GAAG,EAAE,MAAM8K,WAAUG,GAAE,WAAAtK,GAAcsE,SAAS9I,WAAWyE,KAAKmC,KAAK,CAAC,CAAC,CAAA0K,CAAEzN,GAAGY,KAAK2M,QAAQ3M,KAAKnC,MAAMuB,IAAIuJ,QAAE,EAAOvJ,CAAC,EAAE,MAAM+K,WAAUE,GAAE,WAAAtK,GAAcsE,SAAS9I,WAAWyE,KAAKmC,KAAK,CAAC,CAAC,CAAA0K,CAAEzN,GAAGY,KAAK2M,QAAQG,gBAAgB9M,KAAKnC,OAAOuB,GAAGA,IAAIuJ,GAAE,EAAE,MAAMyB,WAAUC,GAAE,WAAAtK,CAAYX,EAAE2C,EAAEpC,EAAErB,EAAE4C,GAAGmD,MAAMjF,EAAE2C,EAAEpC,EAAErB,EAAE4C,GAAGlB,KAAKmC,KAAK,CAAC,CAAC,IAAAwJ,CAAKvM,EAAE2C,EAAE/B,MAAM,IAAIZ,EAAE,GAAEY,KAAKZ,EAAE2C,EAAE,IAAI4G,MAAKF,GAAE,OAAO,MAAM9I,EAAEK,KAAK6L,KAAKvN,EAAEc,IAAIuJ,IAAGhJ,IAAIgJ,IAAGvJ,EAAE2N,UAAUpN,EAAEoN,SAAS3N,EAAE4N,OAAOrN,EAAEqN,MAAM5N,EAAE6N,UAAUtN,EAAEsN,QAAQ/L,EAAE9B,IAAIuJ,KAAIhJ,IAAIgJ,IAAGrK,GAAGA,GAAG0B,KAAK2M,QAAQO,oBAAoBlN,KAAKnC,KAAKmC,KAAKL,GAAGuB,GAAGlB,KAAK2M,QAAQQ,iBAAiBnN,KAAKnC,KAAKmC,KAAKZ,GAAGY,KAAK6L,KAAKzM,CAAC,CAAC,WAAAgO,CAAYhO,GAAG,mBAAmBY,KAAK6L,KAAK7L,KAAK6L,KAAKhU,KAAKmI,KAAKgM,SAASqB,MAAMrN,KAAK2M,QAAQvN,GAAGY,KAAK6L,KAAKuB,YAAYhO,EAAE,EAAE,MAAMsM,GAAE,WAAA3L,CAAYX,EAAE2C,EAAEpC,GAAGK,KAAK2M,QAAQvN,EAAEY,KAAKmC,KAAK,EAAEnC,KAAKiL,UAAK,EAAOjL,KAAKmL,KAAKpJ,EAAE/B,KAAKgM,QAAQrM,CAAC,CAAC,QAAI0L,GAAO,OAAOrL,KAAKmL,KAAKE,IAAI,CAAC,IAAAM,CAAKvM,GAAG,GAAEY,KAAKZ,EAAE,EAAE,MAAkEyN,GAAE,EAAES,uBAAuBT,KAAI1D,GAAEqC,KAAI,EAAE+B,kBAAkB,IAAI9S,KAAK;;;;;;ACAvuN,MAAM,WAAU,EAAE,WAAAsF,GAAcsE,SAAS9I,WAAWyE,KAAKwN,cAAc,CAACH,KAAKrN,MAAMA,KAAKyN,UAAK,CAAM,CAAC,gBAAA/H,GAAmB,MAAMtG,EAAEiF,MAAMqB,mBAAmB,OAAO1F,KAAKwN,cAAcE,eAAetO,EAAEmK,WAAWnK,CAAC,CAAC,MAAA2H,CAAO3H,GAAG,MAAMO,EAAEK,KAAK2N,SAAS3N,KAAKwE,aAAaxE,KAAKwN,cAAcnI,YAAYrF,KAAKqF,aAAahB,MAAM0C,OAAO3H,GAAGY,KAAKyN,KDAg7M,EAACrO,EAAE2C,EAAEpC,KAAK,MAAMrB,EAAEqB,GAAG+N,cAAc3L,EAAE,IAAIb,EAAE5C,EAAEsP,WAAW,QAAG,IAAS1M,EAAE,CAAC,MAAM9B,EAAEO,GAAG+N,cAAc,KAAKpP,EAAEsP,WAAW1M,EAAE,IAAIsK,GAAEzJ,EAAEsK,aAAa,IAAIjN,GAAGA,OAAE,EAAOO,GAAG,CAAC,EAAE,CAAC,OAAOuB,EAAEyK,KAAKvM,GAAG8B,GCA5lN,CAAEvB,EAAEK,KAAKoF,WAAWpF,KAAKwN,cAAc,CAAC,iBAAA1H,GAAoBzB,MAAMyB,oBAAoB9F,KAAKyN,MAAMf,cAAa,EAAG,CAAC,oBAAA3G,GAAuB1B,MAAM0B,uBAAuB/F,KAAKyN,MAAMf,cAAa,EAAG,CAAC,MAAAiB,GAAS,OAAO,EAAC,EAAE,GAAEE,eAAc,EAAG,GAAa,WAAE,EAAGxO,WAAWyO,2BAA2B,CAACC,WAAW,KAAI,MAAM,GAAE1O,WAAW2O,0BAA0B,KAAI,CAACD,WAAW,K,QAA0D1O,WAAW4O,qBAAqB,IAAIxT,KAAK,SCQzxB,MAAMyT,WAAsBH,GAa/BhO,WAAAA,GAAuD,IAA3CrC,EAAoCnC,UAAArB,OAAA,QAAAsB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAEhD8I,QACA,MAAM,WAAElK,EAAU,QAAEgU,EAAO,sBAAE1V,EAAqB,oBAAE2V,EAAmB,QAAEC,GAAYhX,OAAOiX,OAAO,CAC/FnU,WAAY,GACZgU,QAAS,GACT1V,uBAAuB,EACvB2V,qBAAqB,EACrBC,QAAS,IACV3Q,GACHsC,KAAK7F,WAAaA,EAClB6F,KAAKmO,QAAUA,EACfnO,KAAKvH,sBAAwBA,EAC7BuH,KAAKoO,oBAAsBA,EAC3BpO,KAAKqO,QAAUA,CACnB,CACU3I,gBAAAA,GACN,OAAO1F,IACX,CAEA2N,MAAAA,GAGI,OAFA1S,QAAQC,IAAI,wBAELqT,GAAIC,KAAAA,G,gHAAAC,CAAA,2wCAGiCzO,KAAK7F,WACR6F,KAAKmO,QACFnO,KAAKoO,oBAAsB,IAAM,IACrCpO,KAAKvH,sBAAwB,IAAM,IAKPuH,KAAK0O,oBAA8B1O,KAAKqO,QAG1BrO,KAAK2O,cACH3O,KAAK4O,kBACL5O,KAAK6O,0BACL7O,KAAK8O,uBACP9O,KAAK+O,wBAI3F,CACAL,mBAAAA,CAAoBM,GAChB/T,QAAQC,IAAI,sBAAuB8T,GACnC,MAAMnU,EAAWmU,EAAMC,OAEjB5T,EAAQR,EAASQ,MAClBzB,MAAM,SACNC,KAAKC,GAAMA,EAAEC,SACbC,QAAQF,GAAMA,EAAEI,OAAS,GAAKJ,EAAEG,WAAW,YAIhD,GAFA+F,KAAKqO,QAAUhT,EAAMT,KAAK,MAC1BC,EAASQ,MAAQ2E,KAAKqO,QACD,IAAjBhT,EAAMnB,OAEN,YADAS,EAAQvC,EAAY4H,KAAKqO,SAG7B,MAAMa,EAAY7T,EAAM,IACxBX,EAAAA,EAAAA,aAAY,qBAAsBwU,GAClCvU,EAAQvC,EAAY4H,KAAKqO,QAE7B,CACAS,sBAAAA,GACI7T,QAAQC,IAAI,0BACZa,GACJ,CAEA,uBAAM6S,GACF3T,QAAQC,IAAI,qBACZ,MAAMxB,QAAgBd,UAChBwD,EAAiB1C,EAC3B,CACAiV,aAAAA,GACI1T,QAAQC,IAAI,iBACZ,MAAMG,EAAQ2E,KAAKqO,QACnB,GAAqB,IAAjBhT,EAAMnB,OAEN,YADAS,EAAQvC,EAAYiD,GAGxB,MAAM6T,EAAY7T,EAAM,IACxBX,EAAAA,EAAAA,aAAY,qBAAsBwU,GAClCvU,EAAQvC,EAAY4H,KAAKqO,QAE7B,CACAQ,yBAAAA,GACI5T,QAAQC,IAAI,6BACZ7C,EAAMC,aAAeD,EAAMC,YAC3BC,aAAa4W,QAAQ,yBAA0B9W,EAAMC,YAAYiI,YACjEP,KAAKoO,oBAAsB/V,EAAMC,WACrC,CACAyW,uBAAAA,GACI9T,QAAQC,IAAI,2BACZ7C,EAAMI,uBAAyBJ,EAAMI,sBACrCF,aAAa4W,QAAQ,qBAAsB9W,EAAMI,sBAAsB8H,YACvEP,KAAKvH,sBAAwBJ,EAAMI,qBACvC,G,mbACH2W,CAjHYlB,GAAa,aACF,CAChB/T,WAAY,CAAEgI,KAAMC,OAAQE,SAAS,GACrC6L,QAAS,CAAEhM,KAAMC,OAAQE,SAAS,GAClC7J,sBAAuB,CAAE0J,KAAMN,QAASS,SAAS,GACjD8L,oBAAqB,CAAEjM,KAAMN,QAASS,SAAS,GAC/C+L,QAAS,CAAElM,KAAMC,OAAQE,SAAS,KA4G1C+M,eAAeC,OAAO,iBAAkBpB,ICvGtC,OAACqB,EAAA9V,KNjBC0F,OAAOZ,MAAQ,WAAmC,QAAAiR,EAAAjU,UAAArB,OAATuV,EAAI,IAAAzS,MAAAwS,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAJD,EAAIC,GAAAnU,UAAAmU,GAIzC,GAHAxQ,KAAYuQ,GACZxU,QAAQC,IAAIuU,GACZxU,QAAQsD,SAASkR,IACZ7T,MAAqBvD,EAAMI,sBAC5B,OAEJ,MAAOkX,EAASxN,GAAQsN,EAExB,GAAKtN,GAGQ,wBAATA,EAAgC,CAChC,MAAMnH,EAAiBF,EAAE,yBAAyB,GAClDiB,EAAiB,+CAADX,OACnBuU,EAAO,sBAAAvU,OACNJ,EAAeG,YAAW,QAC5B,CACJ,EMIH,MAAMzB,EAA6B,QAAtB6V,QAAU3W,WAAY,IAAA2W,EAAAA,EAAK,CAAC,QACnCnT,EAAiB1C,GACVoB,EAAE,oBAAoB,GAC9BgD,YAAY,IAAIoQ,GAAc,CAClC/T,WAAYT,EAAQU,mBACpB+T,QAA4B,QAArB1U,EAAEC,EAAQtB,UAAW,IAAAqB,OAAA,EAAnBA,EAAqBG,MAAM,MAAMgW,MAC1CnX,sBAAuBJ,EAAMI,sBAC7B2V,oBAAqB/V,EAAMC,YAC3B+V,QAAS3U,EAAQtB,IAAe,MAEjCyX,EAAAA,YAAYC,GACXC,EAAAA,YAAYC,+BACZxW,GAEDqW,EAAAA,YAAYC,GAAGC,EAAAA,YAAYE,8BAA8BtX,UACpDiD,WAAwBjB,EAAQ,2BAA4B8C,EAAM,GAEvE,EAtBC","sources":["webpack://extension-zerxz-lib/webpack/bootstrap","webpack://extension-zerxz-lib/webpack/runtime/define property getters","webpack://extension-zerxz-lib/webpack/runtime/hasOwnProperty shorthand","webpack://extension-zerxz-lib/external module \"../../../../../script.js\"","webpack://extension-zerxz-lib/external module \"../../../../../scripts/openai.js\"","webpack://extension-zerxz-lib/external module \"../../../../../scripts/popup.js\"","webpack://extension-zerxz-lib/./src/utils/constants.ts","webpack://extension-zerxz-lib/external module \"../../../../../scripts/secrets.js\"","webpack://extension-zerxz-lib/./src/utils/utils.ts","webpack://extension-zerxz-lib/./src/utils/gemini.ts","webpack://extension-zerxz-lib/./src/utils/toastr.ts","webpack://extension-zerxz-lib/./node_modules/@lit/reactive-element/css-tag.js","webpack://extension-zerxz-lib/./node_modules/@lit/reactive-element/reactive-element.js","webpack://extension-zerxz-lib/./node_modules/lit-html/lit-html.js","webpack://extension-zerxz-lib/./node_modules/lit-element/lit-element.js","webpack://extension-zerxz-lib/./src/layouts/GeminiLayouts.ts","webpack://extension-zerxz-lib/./src/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"eventSource\"]: () => (__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.eventSource), [\"event_types\"]: () => (__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.event_types), [\"getRequestHeaders\"]: () => (__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.getRequestHeaders), [\"saveSettingsDebounced\"]: () => (__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.saveSettingsDebounced) });","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"oai_settings\"]: () => (__WEBPACK_EXTERNAL_MODULE__scripts_openai_js_991751fb__.oai_settings) });","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"POPUP_TYPE\"]: () => (__WEBPACK_EXTERNAL_MODULE__scripts_popup_js_d782a329__.POPUP_TYPE), [\"callGenericPopup\"]: () => (__WEBPACK_EXTERNAL_MODULE__scripts_popup_js_d782a329__.callGenericPopup) });","export const CUSTOM_KEY = \"api_key_makersuite_custom\";\nconst switchState = localStorage.getItem(\"switch_key_maker_suite\") === \"true\";\nconst throwGeminiErrorState = localStorage.getItem(\"throw_gemini_error\") !== \"true\";\n\nexport const STATE = {\n    switchState,\n    throwGeminiErrorState\n}\n","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"updateSecretDisplay\"]: () => (__WEBPACK_EXTERNAL_MODULE__scripts_secrets_js_e26d24e7__.updateSecretDisplay), [\"writeSecret\"]: () => (__WEBPACK_EXTERNAL_MODULE__scripts_secrets_js_e26d24e7__.writeSecret) });","\nimport { callGenericPopup, POPUP_TYPE } from \"@silly-tavern/scripts/popup\";\nimport {\n    saveSettingsDebounced,\n    getRequestHeaders,\n} from \"@silly-tavern/script\";\nimport { STATE, CUSTOM_KEY } from \"./constants\";\nimport {\n    updateSecretDisplay,\n    writeSecret,\n} from \"@silly-tavern/scripts/secrets\";\n\n\nexport async function getSecrets() {\n    const response = await fetch(\"/api/secrets/view\", {\n        method: \"POST\",\n        headers: getRequestHeaders(),\n    });\n\n    if (response.status === 403) {\n        callGenericPopup(\n            \"<h3>禁止访问</h3><p>要在此处查看您的 API 密钥，请在 config.yaml 文件中将 allowKeysExposure 的值设置为 true，然后重新启动 SillyTavern 服务器。</p>\",\n            POPUP_TYPE.TEXT\n        );\n        return;\n    }\n\n    if (!response.ok) {\n        return;\n    }\n\n    // $(\"#dialogue_popup\").addClass(\"wide_dialogue_popup\");\n    const data = (await response.json()) as Record<string, string>;\n    // console.log(\"data\", data);\n    return data;\n}\n\nexport async function switchSecretsFromArray() {\n    const secrets = await getSecrets();\n    if (!secrets) {\n        return;\n    }\n    if (!STATE.switchState) {\n        return;\n    }\n    const api_key = secrets[CUSTOM_KEY] ?? \"\";\n    const api_keys = api_key\n        .split(/[\\n;]/)\n        .map((v) => v.trim())\n        .filter((v) => v.startsWith(\"AIzaSy\"));\n    if (api_keys.length <= 1) {\n        return;\n    }\n    const currentKey = secrets.api_key_makersuite;\n    let firstKeyApi = \"\";\n    if (api_keys.includes(currentKey)) {\n        api_keys.splice(api_keys.indexOf(currentKey), 1);\n        api_keys.push(currentKey);\n    }\n    firstKeyApi = api_keys[0];\n    writeSecret(\"api_key_makersuite\", firstKeyApi);\n    saveKey(CUSTOM_KEY, api_keys.join(\"\\n\"));\n    const textarea = $(\"#api_key_makersuite_custom\")[0] as HTMLTextAreaElement;\n\n    const currentKeyElement = $(\"#current_key_maker_suite\")[0] as HTMLSpanElement;\n    const lastKeyElement = $(\"#last_key_maker_suite\")[0] as HTMLSpanElement;\n    console.log(\"textarea\", textarea);\n    console.log(\"api_keys\", api_keys);\n    if (!textarea) {\n        return;\n    }\n    currentKeyElement.textContent = `当前密钥: ${firstKeyApi}`;\n    lastKeyElement.textContent = `最后一个密钥: ${currentKey}`;\n\n    textarea.value = api_keys.join(\"\\n\");\n}\n\n\nexport async function saveKey(key: string, value: string, isUpdateSecretDisplay = true) {\n    // 设置密钥\n    await writeSecret(key, value);\n    // 更新密钥显示\n    if (isUpdateSecretDisplay) {\n        updateSecretDisplay();\n    }\n    updateSecretDisplay();\n    // 保存设置\n    saveSettingsDebounced();\n}\n","import { oai_settings } from \"@silly-tavern/scripts/openai\";\nimport { callGenericPopup, POPUP_TYPE } from \"@silly-tavern/scripts/popup\";\nimport {\n\tsecret_state,\n\tupdateSecretDisplay,\n\twriteSecret,\n} from \"@silly-tavern/scripts/secrets\";\nimport { saveKey } from \"./utils\";\ninterface GeminiModel {\n\tdescription: string;\n\tdisplayName: string;\n\tinputTokenLimit: number;\n\tmaxTemperature: number;\n\tname: string;\n\toutputTokenLimit: number;\n\tsupportedGenerationMethods: string[];\n\ttemperature: number;\n\ttopK: number;\n\ttopP: number;\n\tversion: string;\n}\ninterface GeminiResponse {\n\tmodels: GeminiModel[];\n}\ninterface Model {\n\tname: string;\n\tmodel: string;\n}\n\nexport async function getGeminiModel(key: string) {\n\ttry {\n\t\tconst result = await fetch(\n\t\t\t`https://generativelanguage.googleapis.com/v1beta/models/?key=${key}`,\n\t\t);\n\t\tconst data = (await result.json()) as GeminiResponse;\n\t\tif (!data?.models) {\n\t\t\treturn [];\n\t\t}\n\t\tconsole.log(data);\n\t\treturn data.models\n\t\t\t.filter((model) => model.name.includes(\"gemini\"))\n\t\t\t.map((modelData) => {\n\t\t\t\tconst model = modelData.name.replace(\"models/\", \"\");\n\t\t\t\tconst name = modelData.displayName;\n\n\t\t\t\treturn {\n\t\t\t\t\tname,\n\t\t\t\t\tmodel,\n\t\t\t\t};\n\t\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t\treturn [];\n\t}\n}\n\nexport const GEMINI_SOURCES = [\"makersuite\", \"aistudio\"];\n\nexport const isGeminiSource = () =>\n\tGEMINI_SOURCES.includes(oai_settings.chat_completion_source);\n\nexport function throwGeminiError(text = \"\") {\n\n\tcallGenericPopup(`\n\t\t\t\t${text}\n\t\t\t\t<table class=\"responsiveTable\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>报错</th>\n\t\t\t\t\t\t\t<th>原因或解决方案</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>429/Resource has been exhausted</td>\n\t\t\t\t\t\t\t<td>撞到速率上限了，请等一会，若还是出现此报错请将最大上下文调整至 50k 以下</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Internal Server Error</td>\n\t\t\t\t\t\t\t<td>手机端遇到请换成 clash，不要使用类如**VPN、** 加速器等第三方梯子软件，pc 端用户请打开服务模式和 tun 模式，若仍出现此报错需要检查一下反向代理-代理地址中是否留空，若有地址请删掉</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>User location is not supported for the API use.</td>\n\t\t\t\t\t\t\t<td>节点处于被限制的国家，请更换节点(美国最优先，请勿选择欧洲、中国香港、俄罗斯等地区)</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Too Many Requests</td>\n\t\t\t\t\t\t\t<td>重刷过于频繁，等待一分钟，若无效则本日请求已达上限</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Bad request</td>\n\t\t\t\t\t\t\t<td>网络环境出错或 API 已死（账号或项目被封禁）</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>API key expired. Please renew the API key</td>\n\t\t\t\t\t\t\t<td>API key 已过期或被删除</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>The model is overloaded. Please try later</td>\n\t\t\t\t\t\t\t<td>此模型暂时闭馆微调，暂停开放，请换用别的模型或等待一段时间</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Please use a valid role: user, model.</td>\n\t\t\t\t\t\t\t<td>你使用了需要打补丁的预设，请换不需要补丁的预设或打补丁</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>User location is not supported for the API use without a billing account linked.</td>\n\t\t\t\t\t\t\t<td>处在 Google 政策限制免费层级的地区(如英国、意大利)</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>API key not valid. Please pass a valid API key</td>\n\t\t\t\t\t\t\t<td>API 返回错误，检查 API 是否可用</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Permission denied: Consumer has been suspended.</td>\n\t\t\t\t\t\t\t<td>谷歌账号被封禁</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>MakerSuite API returned no candidate</td>\n\t\t\t\t\t\t\t<td>Prompt was blocked due to : OTHER 本次输出被截断，请关闭流式传输</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>Not Found</td>\n\t\t\t\t\t\t\t<td>模型选择错误，请不要选择除 Gemini 系外的模型或 Gemini Ultra</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>MakerSuite Candidate text empty</td>\n\t\t\t\t\t\t\t<td>还是截断，解决方法有很多，关闭一些全局世界书/更改输入内容/换版本更新一点的预设</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>403/Forbidden</td>\n\t\t\t\t\t\t\t<td>账号或项目被封禁，API key 无法调用</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\n\t\t\t\t<h2>出现其它未知报错无法解决请在群内(433695739)提问</h2>\n\t\t\t`, POPUP_TYPE.TEXT, \"\", {\n\t\tlarge: true,\n\t\twide: true,\n\t\tallowVerticalScrolling: true,\n\t});\n}\n\nexport async function initGeminiModels(secrets: Record<string, string> = {}) {\n\tif (!secrets) {\n\t\treturn;\n\t}\n\tconst modelStr = JSON.parse(secrets.models_makersuite ?? \"[]\") as Model[];\n\tconst api_key = secrets.api_key_makersuite ?? \"\";\n\tconsole.log(\"ZerxzLib init\");\n\tconst optgroup = $(\"#model_google_select > optgroup\");\n\tconsole.log(\"optgroup\", optgroup);\n\tconst primaryVersions = optgroup[0];\n\tconst subVersions = optgroup[1];\n\tconsole.log(\"subVersions\", subVersions);\n\tconst subVersionsArray = Array.from(\n\t\tsubVersions.children,\n\t) as HTMLOptionElement[];\n\tconst primaryVersionsArray = Array.from(\n\t\tprimaryVersions.children,\n\t) as HTMLOptionElement[];\n\tconsole.log(\"subVersionsArray\", subVersionsArray);\n\tconst subVersionsValues = subVersionsArray.map((el) => el.value);\n\tconst primaryVersionsValues = primaryVersionsArray.map((el) => el.value);\n\tconst originalVersions = [\n\t\t...primaryVersionsValues,\n\t\t...subVersionsValues,\n\t].flat();\n\tconst cachedVersions = modelStr.map((model) => model.model);\n\t// 判断是否初次加载\n\tif (modelStr.length > 0) {\n\t\tfor (const model of modelStr) {\n\t\t\tif (originalVersions.includes(model.model)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst option = document.createElement(\"option\");\n\t\t\toption.value = model.model;\n\t\t\toption.text = `${model.name}(${model.model})`;\n\t\t\tsubVersions.appendChild(option);\n\t\t}\n\t}\n\tconst geminiModels = await getGeminiModel(api_key);\n\tconsole.log(\"geminiModels\", geminiModels);\n\tconst geminiModelOptions = geminiModels.filter(\n\t\t(model) =>\n\t\t\t!originalVersions.includes(model.model) &&\n\t\t\t!cachedVersions.includes(model.model),\n\t);\n\n\tif (geminiModelOptions.length === 0) {\n\t\tconsole.log(\"没有新的模型\");\n\t} else {\n\t\tconsole.log(\"geminiModelOptions\", geminiModelOptions);\n\t\tfor (const model of geminiModelOptions) {\n\t\t\tconst option = document.createElement(\"option\");\n\t\t\toption.value = model.model;\n\t\t\toption.text = `${model.name}(${model.model})`;\n\t\t\tsubVersions.appendChild(option);\n\t\t}\n\t\tsaveKey(\"models_makersuite\", JSON.stringify(geminiModelOptions));\n\t}\n\tconst uniqueModels = new Set([...originalVersions, ...cachedVersions, ...geminiModelOptions.map((model) => model.model)]);\n\tif (isGeminiSource() && !!secrets.api_key_makersuite_model) {\n\t\tif (!uniqueModels.has(secrets.api_key_makersuite_model)) {\n\t\t\treturn\n\t\t}\n\t\toai_settings.google_model = secrets.api_key_makersuite_model;\n\t\t$('#model_google_select').val(oai_settings.google_model);\n\t\t$(`#model_google_select option[value=\"${oai_settings.google_model}\"`)\n\t\t\t// @ts-ignore\n\t\t\t.attr('selected', true);\n\t}\n\n}\n","import { STATE } from \"./constants\";\nimport { isGeminiSource, throwGeminiError } from \"./gemini\";\n\n// @ts-ignore\nconst oldError = toastr.error;\nexport function initToastr() {\n    // @ts-ignore\n    toastr.error = (/** @type { any[]} */ ...args) => {\n        oldError(...args);\n        console.log(args);\n        console.error(...args);\n        if (!isGeminiSource() || !STATE.throwGeminiErrorState) {\n            return;\n        }\n        const [message, type] = args;\n\n        if (!type) {\n            return;\n        }\n        if (type === \"Chat Completion API\") {\n            const lastKeyElement = $(\"#last_key_maker_suite\")[0] as HTMLSpanElement;\n            throwGeminiError(`<h3>Chat Completion API 错误</h3>\n\t\t\t\t<p>${message}</p>\n\t\t\t\t<p> ${lastKeyElement.textContent}</p>`);\n        }\n    };\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1]),t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:r,getOwnPropertyNames:h,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),y={attribute:!0,type:String,converter:u,reflect:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class b extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=y){if(s.state&&(s.attribute=!1),this._$Ei(),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),r=this.getPropertyDescriptor(t,i,s);void 0!==r&&e(this.prototype,t,r)}}static getPropertyDescriptor(t,s,i){const{get:e,set:h}=r(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get(){return e?.call(this)},set(s){const r=e?.call(this);h.call(this,s),this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??y}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...h(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$EC(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const r=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==r?this.removeAttribute(e):this.setAttribute(e,r),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),r=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e,this[e]=r.fromAttribute(s,t.type),this._$Em=null}}requestUpdate(t,s,i){if(void 0!==t){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??f)(this[t],s))return;this.P(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,s,i){this._$AL.has(t)||this._$AL.set(t,s),!0===i.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t)!0!==i.wrapped||this._$AL.has(s)||void 0===this[s]||this.P(s,this[s],i)}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(s)):this._$EU()}catch(s){throw t=!1,this._$EU(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}b.elementStyles=[],b.shadowRootOptions={mode:\"open\"},b[d(\"elementProperties\")]=new Map,b[d(\"finalized\")]=new Map,p?.({ReactiveElement:b}),(a.reactiveElementVersions??=[]).push(\"2.0.4\");export{b as ReactiveElement,u as defaultConverter,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=\"$lit$\",h=`lit$${Math.random().toFixed(9).slice(2)}$`,o=\"?\"+h,n=`<${o}>`,r=document,l=()=>r.createComment(\"\"),c=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,a=Array.isArray,u=t=>a(t)||\"function\"==typeof t?.[Symbol.iterator],d=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,_=/>/g,m=RegExp(`>|${d}(?:([^\\\\s\"'>=/]+)(${d}*=${d}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),p=/'/g,g=/\"/g,$=/^(?:script|style|textarea|title)$/i,y=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=y(1),b=y(2),w=y(3),T=Symbol.for(\"lit-noChange\"),E=Symbol.for(\"lit-nothing\"),A=new WeakMap,C=r.createTreeWalker(r,129);function P(t,i){if(!a(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==s?s.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,o=[];let r,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=f;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,y=0;for(;y<s.length&&(c.lastIndex=y,u=c.exec(s),null!==u);)y=c.lastIndex,c===f?\"!--\"===u[1]?c=v:void 0!==u[1]?c=_:void 0!==u[2]?($.test(u[2])&&(r=RegExp(\"</\"+u[2],\"g\")),c=m):void 0!==u[3]&&(c=m):c===m?\">\"===u[0]?(c=r??f,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?m:'\"'===u[3]?g:p):c===g||c===p?c=m:c===v||c===_?c=f:(c=m,r=void 0);const x=c===m&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===f?s+n:d>=0?(o.push(a),s.slice(0,d)+e+s.slice(d)+h+x):s+h+(-2===d?i:x)}return[P(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),o]};class N{constructor({strings:t,_$litType$:s},n){let r;this.parts=[];let c=0,a=0;const u=t.length-1,d=this.parts,[f,v]=V(t,s);if(this.el=N.createElement(f,n),C.currentNode=this.el.content,2===s||3===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=C.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(e)){const i=v[a++],s=r.getAttribute(t).split(h),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:c,name:e[2],strings:s,ctor:\".\"===e[1]?H:\"?\"===e[1]?I:\"@\"===e[1]?L:k}),r.removeAttribute(t)}else t.startsWith(h)&&(d.push({type:6,index:c}),r.removeAttribute(t));if($.test(r.tagName)){const t=r.textContent.split(h),s=t.length-1;if(s>0){r.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)r.append(t[i],l()),C.nextNode(),d.push({type:2,index:++c});r.append(t[s],l())}}}else if(8===r.nodeType)if(r.data===o)d.push({type:2,index:c});else{let t=-1;for(;-1!==(t=r.data.indexOf(h,t+1));)d.push({type:7,index:c}),t+=h.length-1}c++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){if(i===T)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=c(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=S(t,h._$AS(t,i.values),h,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??r).importNode(i,!0);C.currentNode=e;let h=C.nextNode(),o=0,n=0,l=s[0];for(;void 0!==l;){if(o===l.index){let i;2===l.type?i=new R(h,h.nextSibling,this,t):1===l.type?i=new l.ctor(h,l.name,l.strings,this,t):6===l.type&&(i=new z(h,this,t)),this._$AV.push(i),l=s[++n]}o!==l?.index&&(h=C.nextNode(),o++)}return C.currentNode=r,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),c(t)?t===E||null==t||\"\"===t?(this._$AH!==E&&this._$AR(),this._$AH=E):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==E&&c(this._$AH)?this._$AA.nextSibling.data=t:this.T(r.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=N.createElement(P(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new M(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=A.get(t.strings);return void 0===i&&A.set(t.strings,i=new N(t)),i}k(t){a(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new R(this.O(l()),this.O(l()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=E,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=E}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=S(this,t,i,0),o=!c(t)||t!==this._$AH&&t!==T,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=S(this,e[s+n],i,n),r===T&&(r=this._$AH[n]),o||=!c(r)||r!==this._$AH[n],r===E?t=E:t!==E&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===E?void 0:t}}class I extends k{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==E)}}class L extends k{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=S(this,t,i,0)??E)===T)return;const s=this._$AH,e=t===E&&s!==E||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==E&&(s===E||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const Z={M:e,P:h,A:o,C:1,L:V,R:M,D:u,V:S,I:R,H:k,N:I,U:L,B:H,F:z},j=t.litHtmlPolyfillSupport;j?.(N,R),(t.litHtmlVersions??=[]).push(\"3.2.1\");const B=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new R(i.insertBefore(l(),t),t,void 0,s??{})}return h._$AI(t),h};export{Z as _$LH,x as html,w as mathml,T as noChange,E as nothing,B as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as s}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class r extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const s=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(s,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return s}}r._$litElement$=!0,r[\"finalized\"]=!0,globalThis.litElementHydrateSupport?.({LitElement:r});const i=globalThis.litElementPolyfillSupport;i?.({LitElement:r});const o={_$AK:(t,e,s)=>{t._$AK(e,s)},_$AL:t=>t._$AL};(globalThis.litElementVersions??=[]).push(\"4.1.1\");export{r as LitElement,o as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","import { LitElement, css, html } from 'lit';\nimport { CUSTOM_KEY, getSecrets, initGeminiModels, saveKey, STATE, throwGeminiError, } from '../utils';\nimport {\n    updateSecretDisplay,\n    writeSecret,\n} from \"@silly-tavern/scripts/secrets\";\ninterface GeminiLayoutsOption {\n    currentKey: string;\n    lastKey: string;\n    throwGeminiErrorState: boolean;\n    switchKeyMakerSuite: boolean;\n    apiKeys: string;\n}\nexport class GeminiLayouts extends LitElement {\n    static properties = {\n        currentKey: { type: String, reflect: true },\n        lastKey: { type: String, reflect: true },\n        throwGeminiErrorState: { type: Boolean, reflect: true },\n        switchKeyMakerSuite: { type: Boolean, reflect: true },\n        apiKeys: { type: String, reflect: true }\n    }\n    declare currentKey: string;\n    declare lastKey: string;\n    declare throwGeminiErrorState: boolean;\n    declare switchKeyMakerSuite: boolean;\n    declare apiKeys: string;\n    constructor(option: Partial<GeminiLayoutsOption> = {}) {\n\n        super();\n        const { currentKey, lastKey, throwGeminiErrorState, switchKeyMakerSuite, apiKeys } = Object.assign({\n            currentKey: \"\",\n            lastKey: \"\",\n            throwGeminiErrorState: false,\n            switchKeyMakerSuite: false,\n            apiKeys: \"\"\n        }, option);\n        this.currentKey = currentKey;\n        this.lastKey = lastKey;\n        this.throwGeminiErrorState = throwGeminiErrorState;\n        this.switchKeyMakerSuite = switchKeyMakerSuite;\n        this.apiKeys = apiKeys;\n    }\n    protected createRenderRoot(): HTMLElement | DocumentFragment {\n        return this;\n    }\n\n    render() {\n        console.log('GeminiLayouts render');\n\n        return html`\n        <div>\n            <h4>密钥调用信息:</h4>\n            <div id=\"current_key_maker_suite\">当前: ${this.currentKey}</div>\n            <div id=\"last_key_maker_suite\">最后: ${this.lastKey}</div>\n            <div id=\"switch_key_maker_suite\">密钥切换:${this.switchKeyMakerSuite ? \"开\" : \"关\"}</div>\n            <div id=\"throw_gemini_error\">报错开关:${this.throwGeminiErrorState ? \"开\" : \"关\"}</div>\n        </div>\n        <div class=\"flex-container flex\">\n            <h4>Google AI Studio API 多个密钥</h4>\n            <textarea class=\"text_pole textarea_compact autoSetHeight\" placeholder=\"API密钥\"\n            id=\"api_key_makersuite_custom\" style=\"height: 100px;\" @change=${this.handleTextareaInput} .value=${this.apiKeys}></textarea>\n        </div>\n        <div class=\"flex-container flex\">\n            <div class=\"menu_button menu_button_icon interactable\" title=\"保存密钥\" @click=\"${this.handleSaveKey}\"><span>保存密钥</span></div>\n            <div class=\"menu_button menu_button_icon interactable\" title=\"获取新的模型\" @click=\"${this.handleGetNewModel}\"><span>获取新的模型</span></div>\n            <div class=\"menu_button menu_button_icon interactable\" title=\"切换密钥设置\" @click=\"${this.handleSwitchKeyMakerSuite}\"><span>切换密钥设置</span></div>\n            <div class=\"menu_button menu_button_icon interactable\" title=\"查看报错原因\" @click=\"${this.handleThrowGeminiError}\"><span>查看报错原因</span></div>\n            <div class=\"menu_button menu_button_icon interactable\" title=\"报错开关\" @click=\"${this.handleSwitchGeminiError}\"><span>报错开关</span></div>\n        </div>\n        <hr>\n        `;\n    }\n    handleTextareaInput(event: Event) {\n        console.log('handleTextareaInput', event);\n        const textarea = event.target as HTMLTextAreaElement;\n\n        const value = textarea.value\n            .split(/[\\n;]/)\n            .map((v) => v.trim())\n            .filter((v) => v.length > 0 && v.startsWith(\"AIzaSy\"));\n\n        this.apiKeys = value.join(\"\\n\");\n        textarea.value = this.apiKeys;\n        if (value.length === 0) {\n            saveKey(CUSTOM_KEY, this.apiKeys);\n            return;\n        }\n        const fistValue = value[0];\n        writeSecret(\"api_key_makersuite\", fistValue);\n        saveKey(CUSTOM_KEY, this.apiKeys);\n        // this.requestUpdate();\n    }\n    handleThrowGeminiError() {\n        console.log('handleThrowGeminiError');\n        throwGeminiError();\n    }\n\n    async handleGetNewModel() {\n        console.log('handleGetNewModel');\n        const secrets = await getSecrets();\n        await initGeminiModels(secrets);\n    }\n    handleSaveKey() {\n        console.log('handleSaveKey');\n        const value = this.apiKeys\n        if (value.length === 0) {\n            saveKey(CUSTOM_KEY, value);\n            return;\n        }\n        const fistValue = value[0];\n        writeSecret(\"api_key_makersuite\", fistValue);\n        saveKey(CUSTOM_KEY, this.apiKeys);\n\n    }\n    handleSwitchKeyMakerSuite() {\n        console.log('handleSwitchKeyMakerSuite');\n        STATE.switchState = !STATE.switchState;\n        localStorage.setItem(\"switch_key_maker_suite\", STATE.switchState.toString());\n        this.switchKeyMakerSuite = STATE.switchState;\n    }\n    handleSwitchGeminiError() {\n        console.log('handleSwitchGeminiError');\n        STATE.throwGeminiErrorState = !STATE.throwGeminiErrorState;\n        localStorage.setItem(\"throw_gemini_error\", STATE.throwGeminiErrorState.toString());\n        this.throwGeminiErrorState = STATE.throwGeminiErrorState;\n    }\n}\ncustomElements.define('gemini-layouts', GeminiLayouts);\n\n","import {\n\teventSource,\n\tevent_types,\n} from \"@silly-tavern/script\";;\nimport {\n\twriteSecret,\n} from \"@silly-tavern/scripts/secrets\";\nimport { getGeminiModel, getSecrets, isGeminiSource, saveKey, switchSecretsFromArray, throwGeminiError, STATE, CUSTOM_KEY, initGeminiModels, initToastr } from \"./utils\";\n\nimport { GeminiLayouts } from \"layouts/GeminiLayouts\";\n\n\n\nasync function createButton(title: string, onClick: () => void) {\n\tconst div = document.createElement(\"div\");\n\tdiv.classList.add(\"menu_button\", \"menu_button_icon\", \"interactable\");\n\tdiv.title = title;\n\tdiv.onclick = onClick;\n\tconst span = document.createElement(\"span\");\n\tspan.textContent = title;\n\tdiv.appendChild(span);\n\treturn div;\n}\n\n; (async () => {\n\tinitToastr();\n\n\n\t// 获取form元素 id为\"makersuite_form\"的元素 用jquery的选择器\n\tconst secrets = (await getSecrets()) ?? {};\n\tawait initGeminiModels(secrets);\n\tconst form = $(\"#makersuite_form\")[0];\n\tform.appendChild(new GeminiLayouts({\n\t\tcurrentKey: secrets.api_key_makersuite,\n\t\tlastKey: secrets[CUSTOM_KEY]?.split(\"\\n\").pop(),\n\t\tthrowGeminiErrorState: STATE.throwGeminiErrorState,\n\t\tswitchKeyMakerSuite: STATE.switchState,\n\t\tapiKeys: secrets[CUSTOM_KEY] || \"\"\n\t}));\n\teventSource.on(\n\t\tevent_types.CHAT_COMPLETION_SETTINGS_READY,\n\t\tswitchSecretsFromArray,\n\t);\n\teventSource.on(event_types.CHATCOMPLETION_MODEL_CHANGED, async (model: string) => {\n\t\tif (isGeminiSource()) await saveKey(\"api_key_makersuite_model\", model);\n\t})\n})();\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","x","d","__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__","__WEBPACK_EXTERNAL_MODULE__scripts_openai_js_991751fb__","__WEBPACK_EXTERNAL_MODULE__scripts_popup_js_d782a329__","CUSTOM_KEY","STATE","switchState","localStorage","getItem","throwGeminiErrorState","__WEBPACK_EXTERNAL_MODULE__scripts_secrets_js_e26d24e7__","async","getSecrets","response","fetch","method","headers","getRequestHeaders","status","callGenericPopup","POPUP_TYPE","TEXT","ok","json","switchSecretsFromArray","_secrets$CUSTOM_KEY","secrets","api_keys","split","map","v","trim","filter","startsWith","length","currentKey","api_key_makersuite","firstKeyApi","includes","splice","indexOf","push","writeSecret","saveKey","join","textarea","$","currentKeyElement","lastKeyElement","console","log","textContent","concat","value","isUpdateSecretDisplay","arguments","undefined","updateSecretDisplay","saveSettingsDebounced","GEMINI_SOURCES","isGeminiSource","oai_settings","chat_completion_source","throwGeminiError","text","large","wide","allowVerticalScrolling","initGeminiModels","_secrets$models_maker","_secrets$api_key_make","modelStr","JSON","parse","models_makersuite","api_key","optgroup","primaryVersions","subVersions","subVersionsArray","Array","from","children","primaryVersionsArray","subVersionsValues","el","originalVersions","flat","cachedVersions","model","option","document","createElement","name","appendChild","geminiModels","result","data","models","modelData","replace","displayName","e","error","getGeminiModel","geminiModelOptions","stringify","uniqueModels","Set","api_key_makersuite_model","has","google_model","val","attr","oldError","toastr","t","globalThis","ShadowRoot","ShadyCSS","nativeShadow","Document","CSSStyleSheet","s","Symbol","WeakMap","n","constructor","this","_$cssResult$","Error","cssText","styleSheet","replaceSync","set","toString","S","adoptedStyleSheets","litNonce","setAttribute","c","cssRules","r","is","getOwnPropertyDescriptor","getOwnPropertyNames","h","getOwnPropertySymbols","getPrototypeOf","a","trustedTypes","l","emptyScript","p","reactiveElementPolyfillSupport","u","toAttribute","Boolean","fromAttribute","i","Number","f","attribute","type","String","converter","reflect","hasChanged","metadata","litPropertyMetadata","b","HTMLElement","addInitializer","_$Ei","observedAttributes","finalize","_$Eh","keys","createProperty","state","elementProperties","noAccessor","getPropertyDescriptor","requestUpdate","configurable","getPropertyOptions","Map","finalized","properties","_$Eu","elementStyles","finalizeStyles","styles","isArray","reverse","unshift","toLowerCase","super","_$Ep","isUpdatePending","hasUpdated","_$Em","_$Ev","_$ES","Promise","enableUpdating","_$AL","_$E_","forEach","addController","_$EO","add","renderRoot","isConnected","hostConnected","removeController","delete","size","createRenderRoot","shadowRoot","attachShadow","shadowRootOptions","connectedCallback","disconnectedCallback","hostDisconnected","attributeChangedCallback","_$AK","_$EC","removeAttribute","P","_$ET","_$Ej","reject","scheduleUpdate","performUpdate","wrapped","shouldUpdate","willUpdate","hostUpdate","update","_$EU","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","mode","ReactiveElement","reactiveElementVersions","createPolicy","createHTML","Math","random","toFixed","slice","createComment","iterator","_","m","RegExp","g","_$litType$","strings","values","T","for","E","A","C","createTreeWalker","V","lastIndex","exec","test","N","parts","currentNode","content","firstChild","replaceWith","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","getAttribute","index","ctor","H","I","L","k","tagName","append","innerHTML","_$Co","_$Cl","_$litDirective$","_$AO","_$AT","_$AS","M","_$AV","_$AN","_$AD","_$AM","parentNode","_$AU","creationScope","importNode","R","nextSibling","z","_$AI","_$Cv","_$AH","_$AA","_$AB","options","startNode","endNode","_$AR","O","insertBefore","createTextNode","_$AC","_$AP","remove","setConnected","element","fill","j","toggleAttribute","capture","once","passive","removeEventListener","addEventListener","handleEvent","host","litHtmlPolyfillSupport","litHtmlVersions","renderOptions","_$Do","renderBefore","render","_$litPart$","_$litElement$","litElementHydrateSupport","LitElement","litElementPolyfillSupport","litElementVersions","GeminiLayouts","lastKey","switchKeyMakerSuite","apiKeys","assign","html","_templateObject","_taggedTemplateLiteral","handleTextareaInput","handleSaveKey","handleGetNewModel","handleSwitchKeyMakerSuite","handleThrowGeminiError","handleSwitchGeminiError","event","target","fistValue","setItem","_defineProperty","customElements","define","_await$getSecrets","_len","args","_key","message","pop","eventSource","on","event_types","CHAT_COMPLETION_SETTINGS_READY","CHATCOMPLETION_MODEL_CHANGED"],"sourceRoot":""}